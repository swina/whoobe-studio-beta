(("undefined"!==typeof self?self:this)["webpackJsonpWhoobeMain"]=("undefined"!==typeof self?self:this)["webpackJsonpWhoobeMain"]||[]).push([[4,3],{dec2:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.current?n("div",[e._l(Object.keys(e.datastore.schema.plugins),(function(t,r){return[e.current.hasOwnProperty(t)?n("details",[n("summary",{staticClass:"bg-gray-200 p-1 mt-1 text-lime-600 text-lg outline-none border-0 focus:outline-none cursor-pointer  capitalize font-bold",on:{click:function(n){e.summary=t}}},[e._v(e._s(t))]),e.summary.includes(t)?n("div",[e._l(Object.keys(e.current[t]).sort(),(function(r){return[e.current[t].hasOwnProperty(r)&&"object"===typeof e.current[t][r]?n("div",{staticClass:"p-2 bg-gray-300"},[n("details",[n("summary",{staticClass:"outline-none border-0 focus:outline-none cursor-pointer  capitalize font-bold",on:{click:function(n){e.summary=t+r}}},[e._v(e._s(r))]),e.summary===t+r?n("div",[e._l(Object.keys(e.current[t][r]),(function(i){return[e.current[t][r].hasOwnProperty(i)?n("div",{key:t+r+i},[n("label",[e._v(e._s(i))]),"string"===typeof e.current[t][r][i]&&"config"!=i?n("input",{directives:[{name:"model",rawName:"v-model",value:e.current[t][r][i],expression:"current[field][f][ff]"}],staticClass:"w-full",attrs:{type:"text"},domProps:{value:e.current[t][r][i]},on:{input:function(n){n.target.composing||e.$set(e.current[t][r],i,n.target.value)}}}):e._e(),"number"===typeof e.current[t][r][i]&&"config"!=i?n("input",{directives:[{name:"model",rawName:"v-model",value:e.current[t][r][i],expression:"current[field][f][ff]"}],staticClass:"w-full",attrs:{type:"number"},domProps:{value:e.current[t][r][i]},on:{input:function(n){n.target.composing||e.$set(e.current[t][r],i,n.target.value)}}}):e._e(),"boolean"===typeof e.current[t][r][i]?n("input",{directives:[{name:"model",rawName:"v-model",value:e.current[t][r][i],expression:"current[field][f][ff]"}],staticClass:"float-left",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.current[t][r][i])?e._i(e.current[t][r][i],null)>-1:e.current[t][r][i]},on:{change:function(n){var s=e.current[t][r][i],a=n.target,c=!!a.checked;if(Array.isArray(s)){var l=null,u=e._i(s,l);a.checked?u<0&&e.$set(e.current[t][r],i,s.concat([l])):u>-1&&e.$set(e.current[t][r],i,s.slice(0,u).concat(s.slice(u+1)))}else e.$set(e.current[t][r],i,c)}}}):e._e()]):e._e()]})),e._m(0,!0)],2):e._e()])]):n("div",{staticClass:"p-2"},[n("label",{staticClass:"capitalize"},[e._v(e._s(r))]),"string"===typeof e.current[t][r]&&"config"!=r?n("input",{directives:[{name:"model",rawName:"v-model",value:e.current[t][r],expression:"current[field][f]"}],staticClass:"w-full",attrs:{type:"text"},domProps:{value:e.current[t][r]},on:{input:function(n){n.target.composing||e.$set(e.current[t],r,n.target.value)}}}):e._e(),"boolean"===typeof e.current[t][r]?n("input",{directives:[{name:"model",rawName:"v-model",value:e.current[t][r],expression:"current[field][f]"}],staticClass:"float-left",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.current[t][r])?e._i(e.current[t][r],null)>-1:e.current[t][r]},on:{change:function(n){var i=e.current[t][r],s=n.target,a=!!s.checked;if(Array.isArray(i)){var c=null,l=e._i(i,c);s.checked?l<0&&e.$set(e.current[t],r,i.concat([c])):l>-1&&e.$set(e.current[t],r,i.slice(0,l).concat(i.slice(l+1)))}else e.$set(e.current[t],r,a)}}}):e._e(),"object"===typeof e.current[t][r]?n("div",[e._v(" "+e._s(e.current[t][r])+" ")]):e._e(),"config"===r?n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.current[t][r],expression:"current[field][f]"}],staticClass:"w-full",domProps:{value:e.current[t][r]},on:{input:function(n){n.target.composing||e.$set(e.current[t],r,n.target.value)}}}):e._e()])]}))],2):e._e()]):e._e()]}))],2):e._e()},i=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("button",{staticClass:"sm"},[e._v("Add key")])])}],s=n("5530"),a=n("2f62"),c={name:"MokaPluginConfigurator",data:function(){return{summary:"",plugin:null}},computed:Object(s["a"])({},Object(a["a"])(["datastore"])),props:["current"]},l=c,u=n("2877"),o=Object(u["a"])(l,r,i,!1,null,null,null);t["default"]=o.exports},ebca:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"p-2 flex flex-col"},[n("div",{staticClass:"grid grid-cols-3 grid-flow-row items-center",staticStyle:{"grid-template-columns":"1fr 2fr 1fr"}},[n("button",{on:{click:e.addPlugin}},[e._v("Add plugin")])]),e.plugins?n("div",{staticClass:"grid grid-cols-4 gap-4"},[e._l(e.plugins,(function(t){return[n("div",{staticClass:"p-4 relative shadow border rounded justify-center items-center flex flex-col"},[t.general.enabled?e._e():n("i",{staticClass:"material-icons text-5xl bg-gray-300 p-2 rounded-full"},[e._v("settings_input_component")]),t.general.enabled?n("i",{staticClass:"material-icons text-5xl bg-lime-500 p-2 rounded-full"},[e._v("settings_input_component")]):e._e(),n("div",[e._v(e._s(t.general.name))]),n("div",{staticClass:"text-sm text-center"},[e._v(e._s(t.general.description||" "))]),n("button",{class:t.general.enabled?"danger":"success"},[e._v(e._s(t.general.enabled?"Disable":"Enable"))]),n("i",{staticClass:"absolute top-0 right-0 m-1 material-icons my-2",on:{click:function(n){e.current=t,e.pluginSettings=!e.pluginSettings}}},[e._v("build")])])]}))],2):e._e(),e.pluginSettings?n("moka-modal",{attrs:{size:"lg",position:""},on:{close:function(t){e.pluginSettings=!e.pluginSettings},click_0:function(t){e.pluginSettings=!e.pluginSettings},click_1:function(t){return e.savePlugin()}}},[n("div",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(e.current.general.name||"New Plugin")+" settings")]),n("div",{staticClass:"relative h-3/5 p-2 w-full ",attrs:{slot:"content"},slot:"content"},[n("div",{staticClass:"absolute overflow-y-auto h-full w-11/12 m-2 bg-white"},[n("moka-plugin-configurator",{attrs:{current:e.current}})],1)]),n("div",{staticClass:"p-4 bg-red-100 text-center",attrs:{slot:"footer"},slot:"footer"},[n("i",[e._v("Please read the documentation before to enable/install a plugin")])])]):e._e()],1)},i=[],s=n("53ca"),a=n("5530"),c=(n("cca6"),n("d81d"),n("b64b"),n("7db0"),n("dec2")),l=n("2f62"),u={name:"MokaPlugins",components:{MokaPluginConfigurator:c["default"]},data:function(){return{plugins:null,current:null,config:"",pluginSettings:!1,pluginNew:!1,configStr:{},configField:"{}"}},computed:Object(a["a"])({},Object(l["a"])(["moka","datastore"])),watch:{pluginSettings:function(e){}},methods:{addPlugin:function(){var e=this,t=Object.assign({},this.datastore.schema.plugins);Object.keys(t).map((function(n){"string"===typeof t[n]&&(t[n]=""),"boolean"===typeof t[n]&&(t[n]=!1),"object"===Object(s["a"])(t[n])&&(e.configStr[n]="")})),t.id=this.$randomID(),this.current=t,this.pluginSettings=!0,this.pluginNew=!0},savePlugin:function(){var e=this;this.pluginNew?(this.$api.service("plugins").create(this.current).then((function(t){console.log("created=>",t),e.plugins.push(e.current)})),this.pluginNew=!1):this.$api.service("plugins").patch(this.current._id,this.current).then((function(e){console.log("patched=>",e)}))}},mounted:function(){var e=this;this.$api.service("plugins").find().then((function(t){e.plugins=t.data}))}},o=u,d=n("2877"),f=Object(d["a"])(o,r,i,!1,null,null,null);t["default"]=f.exports}}]);